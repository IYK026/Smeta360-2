# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ SMETA360

## üìÖ –î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: 1 –æ–∫—Ç—è–±—Ä—è 2025

---

## üö® **–û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤**

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–£ –Ω–∞—Å —Å–º–µ—à–∞–Ω—ã **–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞**:
- **Vitest** - –¥–ª—è unit/integration —Ç–µ—Å—Ç–æ–≤
- **Playwright** - –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤

#### üîç **–ì–¥–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è:**
```javascript
// E2E —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Playwright —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
import { test, expect } from '@playwright/test';
test.describe('Materials Search Flow', () => { ... });

// –ù–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Vitest –≤ npm test
// –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç: "Playwright Test did not expect test() to be called here"
```

#### üéØ **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –í `package.json` –∫–æ–º–∞–Ω–¥–∞ `npm test` –∑–∞–ø—É—Å–∫–∞–µ—Ç **vitest run**
- –ù–æ **vitest –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ñ–∞–π–ª—ã**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –¥–ª—è Playwright
- –ü–æ–ª—É—á–∞–µ—Ç—Å—è **–∫–æ–Ω—Ñ–ª–∏–∫—Ç API** –¥–≤—É—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

---

### 2. **Backend —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞**

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```bash
Error: connect ECONNREFUSED 127.0.0.1:3001
```

#### üîç **–ì–¥–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è:**
- `auth.test.js` - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç
- `catalog.test.js` - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç  
- `performance.test.js` - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

#### üéØ **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
Backend —Ç–µ—Å—Ç—ã –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `localhost:3001`, –Ω–æ:
1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω** –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∑–∞–ø—É—Å–∫–∞** —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏
3. **–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã** –≤ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### üí° **–î–µ—Ç–∞–ª–∏:**
```javascript
// tests/backend/auth.test.js –ø—ã—Ç–∞–µ—Ç—Å—è:
const response = await api.post('/auth/login', { ... })
// –ù–æ api —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ http://localhost:3001 
// –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∑–∞–ø—É—â–µ–Ω –≤ –º–æ–º–µ–Ω—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

### 3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–≤—Ä–µ–∂–¥–∞—é—Ç—Å—è**

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–§–∞–π–ª—ã `vitest.config.js` –∏ `playwright.config.ts` **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–≤—Ä–µ–∂–¥–∞—é—Ç—Å—è** –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.

#### üîç **–ì–¥–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è:**
```javascript
// –§–∞–π–ª –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –Ω–µ—á–∏—Ç–∞–µ–º—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π –º—É—Å–æ—Ä:
// ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
```

#### üéØ **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤** –Ω–∞—Ä—É—à–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- **VS Code** –∏–ª–∏ **—Å–∏—Å—Ç–µ–º–∞** –ø–æ–≤—Ä–µ–∂–¥–∞–µ—Ç —Ñ–∞–π–ª—ã –ø—Ä–∏ –∑–∞–ø–∏—Å–∏
- –í–æ–∑–º–æ–∂–Ω–æ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π** –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–µ–º

---

### 4. **–°–º–µ—à–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤**

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è **–∫–æ–≥–¥–∞ —á—Ç–æ –∑–∞–ø—É—Å–∫–∞—Ç—å**:

```json
// package.json
"test": "vitest run"  // –ó–∞–ø—É—Å–∫–∞–µ—Ç –í–°–ï —Ç–µ—Å—Ç—ã (–∏ backend, –∏ E2E)
```

#### üîç **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- **Backend —Ç–µ—Å—Ç—ã** —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä
- **E2E —Ç–µ—Å—Ç—ã** —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π frontend + backend  
- **–í—Å–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** –±–µ–∑ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

#### üéØ **–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```json
{
  "test:backend": "vitest run tests/backend/**",
  "test:e2e": "playwright test",
  "test:all": "npm run test:backend && npm run test:e2e"
}
```

---

### 5. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:**
- **Vitest** –∏ **Playwright** –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
- **@testing-library** –Ω–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (–Ω—É–∂–µ–Ω –¥–ª—è frontend —Ç–µ—Å—Ç–æ–≤)
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∏–ø—ã** –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (`@types/node`, etc.)

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
- **–ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –¥–ª—è test/describe/expect
- **–ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (jsdom –¥–ª—è frontend)
- **–ù–µ—Ç setup —Ñ–∞–π–ª–æ–≤** –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

---

## üéØ **–ö–û–ù–ö–†–ï–¢–ù–´–ï –ü–†–ò–ú–ï–†–´ –û–®–ò–ë–û–ö**

### Backend —Ç–µ—Å—Ç (auth.test.js):
```javascript
// ‚ùå –û–®–ò–ë–ö–ê:
const response = await api.post('/auth/login', credentials)
// AggregateError: connect ECONNREFUSED 127.0.0.1:3001

// ‚úÖ –î–û–õ–ñ–ù–û –ë–´–¢–¨:
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º
// 2. –î–æ–∂–¥–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
// 3. –ü–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã
```

### E2E —Ç–µ—Å—Ç (auth.setup.spec.ts):
```javascript
// ‚ùå –û–®–ò–ë–ö–ê:
import { test as setup, expect } from '@playwright/test';
setup('authenticate as admin', async ({ page }) => { ... })
// Error: Playwright Test did not expect test() to be called here

// ‚úÖ –î–û–õ–ñ–ù–û –ë–´–¢–¨:
// –ó–∞–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ playwright test, –∞ –Ω–µ vitest run
```

### –ö–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª:
```javascript
// ‚ùå –ö–ê–ö –ü–û–õ–£–ß–ê–ï–¢–°–Ø:
// ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ

// ‚úÖ –ö–ê–ö –î–û–õ–ñ–ù–û –ë–´–¢–¨:
export default {
  test: {
    globals: true,
    environment: 'node'
  }
}
```

---

## üí° **–ü–û–ß–ï–ú–£ –≠–¢–û –ü–†–û–ò–°–•–û–î–ò–¢**

### 1. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞—Å–ª–æ–µ–Ω–∏–µ**
- –ü—Ä–æ–µ–∫—Ç **—Ä–∞–∑–≤–∏–≤–∞–ª—Å—è –ø–æ—ç—Ç–∞–ø–Ω–æ**
- **–†–∞–∑–Ω—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏** –¥–æ–±–∞–≤–ª—è–ª–∏ —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–æ–≤
- **–ù–µ –±—ã–ª–æ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞

### 2. **–ù–µ–ø–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
- **–£–¥–∞–ª–∏–ª–∏ vitest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ
- **–ù–æ –æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–µ—Å—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç –Ω–∏—Ö –∑–∞–≤–∏—Å—è—Ç
- **–°–æ–∑–¥–∞–ª–∏ inconsistent —Å–æ—Å—Ç–æ—è–Ω–∏–µ**

### 3. **–°–º–µ—à–∞–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã**
- **Backend —Ç–µ—Å—Ç—ã** –Ω–∞–ø–∏—Å–∞–Ω—ã –∫–∞–∫ integration (—Ç—Ä–µ–±—É—é—Ç —Å–µ—Ä–≤–µ—Ä)
- **E2E —Ç–µ—Å—Ç—ã** –Ω–∞–ø–∏—Å–∞–Ω—ã –∫–∞–∫ end-to-end (—Ç—Ä–µ–±—É—é—Ç –±—Ä–∞—É–∑–µ—Ä)
- **–ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º** –∫–∞–∫ unit —Ç–µ—Å—Ç—ã

---

## üöÄ **–ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨**

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 - –†–∞–∑–¥–µ–ª–∏—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:
```json
{
  "test:unit": "vitest run tests/backend/**",
  "test:e2e": "playwright test tests/e2e/**", 
  "pretest:unit": "node scripts/start-test-server.js",
  "pretest:e2e": "npm run build && npm run preview"
}
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 - –ò—Å–ø—Ä–∞–≤–∏—Ç—å backend —Ç–µ—Å—Ç—ã:
- –î–æ–±–∞–≤–∏—Ç—å **setup** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å **teardown** –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **test database** –≤–º–µ—Å—Ç–æ production

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 - –ò—Å–ø—Ä–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã:
- –°–æ–∑–¥–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** Playwright
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å **webServer** –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ URL**

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 - –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ø—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã **—á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã**, –∞ –Ω–µ —Ä—É–∫–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å **–≤–∞–ª–∏–¥–∞—Ü–∏—é** –∫–æ–Ω—Ñ–∏–≥–æ–≤

---

## üéØ **–ò–¢–û–ì**

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –£ –Ω–∞—Å **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –±–∞—Ä–¥–∞–∫** –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ - —Å–º–µ—à–∞–Ω—ã —Ä–∞–∑–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, –ø–æ–¥—Ö–æ–¥—ã –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±–µ–∑ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ **—Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ –ø–æ—Ä—è–¥–æ–∫** –∫–∞–∂–¥—ã–π —Ç–∏–ø —Ç–µ—Å—Ç–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ, —Å–æ–∑–¥–∞–≤ —á–µ—Ç–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –∏ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–ø—É—Å–∫–∞.