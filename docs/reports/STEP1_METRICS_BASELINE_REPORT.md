# üìä –û—Ç—á–µ—Ç –ø–æ –®–∞–≥—É 1: –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ë–∞–∑–æ–≤–∞—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus –º–µ—Ç—Ä–∏–∫
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `prom-client`
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `server/metrics.js` —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### HTTP –º–µ—Ç—Ä–∏–∫–∏
- **http_request_duration_seconds** (histogram) - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **http_requests_total** (counter) - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤  
- **active_connections** (gauge) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### Database –º–µ—Ç—Ä–∏–∫–∏
- **db_query_duration_seconds** (histogram) - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (>500ms)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π (SELECT, CREATE, ALTER)

### 3. Baseline –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/health`
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: 0.957ms
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 1.082ms - 3.479ms
- **–¶–µ–ª—å p95 <300ms**: ‚úÖ **–î–û–°–¢–ò–ì–ù–£–¢–ê** (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã < 4ms)

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã**: 
  - `SELECT NOW()`: ~1150ms (—Å–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ Aiven Cloud)
  - CREATE TABLE –æ–ø–µ—Ä–∞—Ü–∏–∏: ~158ms (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)
  - ALTER TABLE –æ–ø–µ—Ä–∞—Ü–∏–∏: ~158ms (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚úÖ
- HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ü–µ–ª–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–µ–º–ª–µ–º—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è DDL –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å SELECT NOW() –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é –∑–∞–¥–µ—Ä–∂–∫—É –æ–±–ª–∞—á–Ω–æ–π –ë–î

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚úÖ 
- Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `/metrics`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ HTTP –∑–∞–ø—Ä–æ—Å–∞—Ö
- –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ë–î —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º –∏ —Ç–∞–±–ª–∏—Ü–∞–º

## üìà –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:3001/metrics

# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- http_request_duration_seconds_count
- http_request_duration_seconds_sum  
- db_query_duration_seconds_count
- db_query_duration_seconds_sum
- http_requests_total
- active_connections
```

## ‚ú® –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –®–∞–≥—É 2

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í**

–°–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ë–î
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- Baseline —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π

---
*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è*: 01.10.2025  
*–°–µ—Ä–≤–µ—Ä*: Node.js –Ω–∞ –ø–æ—Ä—Ç—É 3001  
*–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö*: PostgreSQL (Aiven Cloud)*