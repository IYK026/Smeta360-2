# API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –û–±—ä–µ–∫—Ç–∞ –∏ –°–º–µ—Ç—ã –ó–∞–∫–∞–∑—á–∏–∫–∞

## üìä –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä

### ‚úÖ –°—Ç–∞—Ç—É—Å –ë–î –∏ API
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞**: ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã + ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- **–°–º–µ—Ç–∞ –∑–∞–∫–∞–∑—á–∏–∫–∞**: ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã + ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üèóÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞ (Object Parameters)

### üìã –¢–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
1. **`object_parameters`** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—ä–µ–∫—Ç–∞
2. **`project_rooms`** - –ø–æ–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ (—Å–≤—è–∑–∞–Ω–æ —Å object_parameters)  
3. **`constructive_elements`** - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (—Å–≤—è–∑–∞–Ω–æ —Å object_parameters)
4. **`engineering_systems`** - –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (—Å–≤—è–∑–∞–Ω–æ —Å object_parameters)

### üîó API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞:
- `GET /api/projects/:projectId/object-parameters` - –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
- `POST /api/projects/:projectId/object-parameters` - —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞

#### –ü–æ–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞:
- `GET /api/object-parameters/:objectParamsId/rooms` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏—è
- `POST /api/object-parameters/:objectParamsId/rooms` - —Å–æ–∑–¥–∞—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- `GET /api/object-parameters/:objectParamsId/constructive-elements` - –ø–æ–ª—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã
- `POST /api/object-parameters/:objectParamsId/constructive-elements` - —Å–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç

#### –ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:
- `GET /api/object-parameters/:objectParamsId/engineering-systems` - –ø–æ–ª—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—ã
- `POST /api/object-parameters/:objectParamsId/engineering-systems` - —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—ä–µ–∫—Ç–∞ (`simpleAuth` middleware)

---

## üí∞ –°–º–µ—Ç–∞ –∑–∞–∫–∞–∑—á–∏–∫–∞ (Customer Estimates)

### üìã –¢–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
1. **`customer_estimates`** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–º–µ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞
2. **`customer_estimate_items`** - –ø–æ–∑–∏—Ü–∏–∏/—ç–ª–µ–º–µ–Ω—Ç—ã —Å–º–µ—Ç—ã
3. **`customer_estimate_history`** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–º–µ—Ç—ã
4. **`customer_estimate_templates`** - —à–∞–±–ª–æ–Ω—ã —Å–º–µ—Ç

### üîó API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å–º–µ—Ç–æ–π:
- `GET /api/customer-estimates` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–º–µ—Ç—ã –∑–∞–∫–∞–∑—á–∏–∫–∞ ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** (9 —Å–º–µ—Ç –Ω–∞–π–¥–µ–Ω–æ)
- `GET /api/customer-estimates/:id` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–º–µ—Ç—É
- `POST /api/customer-estimates` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–º–µ—Ç—É
- `PUT /api/customer-estimates/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–º–µ—Ç—É
- `DELETE /api/customer-estimates/:id` - —É–¥–∞–ª–∏—Ç—å —Å–º–µ—Ç—É

#### –ü–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç—ã:
- `GET /api/customer-estimates/:estimateId/items` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç—ã
- `POST /api/customer-estimates/:estimateId/items` - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –≤ —Å–º–µ—Ç—É
- `PUT /api/customer-estimates/:estimateId/items/:itemId` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
- `DELETE /api/customer-estimates/:estimateId/items/:itemId` - —É–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /api/customer-estimates-old` - —Å—Ç–∞—Ä—ã–µ —Å–º–µ—Ç—ã (–≤–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏)

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
**–ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Å–º–µ—Ç—ã –∑–∞–∫–∞–∑—á–∏–∫–∞

---

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°–º–µ—Ç—ã –∑–∞–∫–∞–∑—á–∏–∫–∞ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ):
```json
{
  "id": 14,
  "name": "–¢–µ—Å—Ç–æ–≤–∞—è —Å–º–µ—Ç–∞ CRUD", 
  "status": "active",
  "total_amount": "0.00",
  "items_count": "1"
}
```

### –í—Å–µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ:
- **9 —Å–º–µ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞** –Ω–∞–π–¥–µ–Ω–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–°—Ç–∞—Ç—É—Å—ã**: draft, active
- **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (version field)
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã**: work_coefficient, material_coefficient

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü–æ–ª–Ω—ã–π CRUD –¥–ª—è —Å–º–µ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞** - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. **–°–≤—è–∑–∏ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏** - –æ–±–∞ –º–æ–¥—É–ª—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
4. **–ò–Ω–¥–µ–∫—Å—ã** - —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
1. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞ —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω
2. –°–º–µ—Ç—ã –∑–∞–∫–∞–∑—á–∏–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è –¥–µ–º–æ)
3. –í—Å–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º
4. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (tenant_id)

### üîß –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
**100% –≥–æ—Ç–æ–≤–æ** - –æ–±–∞ –º–æ–¥—É–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.